-- =====================================================
-- Work Page Demo Data Injection
-- Description: Insert demo data for Mahakam Fase 1 and Fase 3
-- Run this AFTER add_work_tables.sql
-- Date: 2024-12-24
-- =====================================================

-- Insert Work Projects (Fases)
INSERT INTO work_projects (id, project_name, fase_name, target, start_date, end_date, manpower_eksisting, productivity_target, obstacle, action_plan)
VALUES 
  ('11111111-1111-1111-1111-111111111111', 'Mahakam', 'Fase 1', 77000, '2024-12-01', '2024-12-31', 80, 193, '', 'Maintain Progress yang telah dilakukan agar bisa selesai tepat waktu atau lebih awal'),
  ('22222222-2222-2222-2222-222222222222', 'Mahakam', 'Fase 3', 372000, '2024-12-08', '2024-12-31', 80, 200, '', 'Maintain progress penanaman agar dapat menyelesaikan project tepat waktu')
ON CONFLICT (project_name, fase_name) DO UPDATE SET
  target = EXCLUDED.target,
  start_date = EXCLUDED.start_date,
  end_date = EXCLUDED.end_date,
  manpower_eksisting = EXCLUDED.manpower_eksisting,
  productivity_target = EXCLUDED.productivity_target,
  obstacle = EXCLUDED.obstacle,
  action_plan = EXCLUDED.action_plan;

-- =====================================================
-- MAHAKAM FASE 1 - Daily Data (December 1-24)
-- S-Curve pattern with sigmoid function
-- Actual data up to day 7 (100% realization)
-- =====================================================
INSERT INTO work_daily_data (work_project_id, date, day_index, plan_cumulative, actual_cumulative, plan_daily, actual_daily)
VALUES
  -- Day 1-7: Has actual data (ahead of plan)
  ('11111111-1111-1111-1111-111111111111', '2024-12-01', 1, 385, 424, 385, 424),
  ('11111111-1111-1111-1111-111111111111', '2024-12-02', 2, 1848, 2033, 1463, 1609),
  ('11111111-1111-1111-1111-111111111111', '2024-12-03', 3, 7700, 8470, 5852, 6437),
  ('11111111-1111-1111-1111-111111111111', '2024-12-04', 4, 23100, 25410, 15400, 16940),
  ('11111111-1111-1111-1111-111111111111', '2024-12-05', 5, 46200, 50820, 23100, 25410),
  ('11111111-1111-1111-1111-111111111111', '2024-12-06', 6, 61600, 67760, 15400, 16940),
  ('11111111-1111-1111-1111-111111111111', '2024-12-07', 7, 69300, 77000, 7700, 9240),
  -- Day 8-24: Plan only (no actual yet)
  ('11111111-1111-1111-1111-111111111111', '2024-12-08', 8, 73150, 0, 3850, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-09', 9, 75075, 0, 1925, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-10', 10, 76038, 0, 963, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-11', 11, 76519, 0, 481, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-12', 12, 76760, 0, 241, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-13', 13, 76880, 0, 120, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-14', 14, 76940, 0, 60, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-15', 15, 76970, 0, 30, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-16', 16, 76985, 0, 15, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-17', 17, 76993, 0, 8, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-18', 18, 76996, 0, 3, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-19', 19, 76998, 0, 2, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-20', 20, 76999, 0, 1, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-21', 21, 77000, 0, 1, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-22', 22, 77000, 0, 0, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-23', 23, 77000, 0, 0, 0),
  ('11111111-1111-1111-1111-111111111111', '2024-12-24', 24, 77000, 0, 0, 0)
ON CONFLICT (work_project_id, date) DO UPDATE SET
  plan_cumulative = EXCLUDED.plan_cumulative,
  actual_cumulative = EXCLUDED.actual_cumulative,
  plan_daily = EXCLUDED.plan_daily,
  actual_daily = EXCLUDED.actual_daily;

-- =====================================================
-- MAHAKAM FASE 3 - Daily Data (December 8-31)
-- S-Curve pattern with sigmoid function
-- Actual data up to day 16 (slightly behind plan at 95%)
-- =====================================================
INSERT INTO work_daily_data (work_project_id, date, day_index, plan_cumulative, actual_cumulative, plan_daily, actual_daily)
VALUES
  -- Day 8-16: Has actual data (95% of plan)
  ('22222222-2222-2222-2222-222222222222', '2024-12-08', 8, 1860, 1767, 1860, 1767),
  ('22222222-2222-2222-2222-222222222222', '2024-12-09', 9, 5580, 5301, 3720, 3534),
  ('22222222-2222-2222-2222-222222222222', '2024-12-10', 10, 14880, 14136, 9300, 8835),
  ('22222222-2222-2222-2222-222222222222', '2024-12-11', 11, 33480, 31806, 18600, 17670),
  ('22222222-2222-2222-2222-222222222222', '2024-12-12', 12, 63240, 60078, 29760, 28272),
  ('22222222-2222-2222-2222-222222222222', '2024-12-13', 13, 104160, 98952, 40920, 38874),
  ('22222222-2222-2222-2222-222222222222', '2024-12-14', 14, 152520, 144894, 48360, 45942),
  ('22222222-2222-2222-2222-222222222222', '2024-12-15', 15, 204600, 194370, 52080, 49476),
  ('22222222-2222-2222-2222-222222222222', '2024-12-16', 16, 253920, 241224, 49320, 46854),
  -- Day 17-31: Plan only (no actual yet)
  ('22222222-2222-2222-2222-222222222222', '2024-12-17', 17, 294720, 0, 40800, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-18', 18, 325080, 0, 30360, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-19', 19, 346800, 0, 21720, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-20', 20, 361560, 0, 14760, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-21', 21, 371280, 0, 9720, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-22', 22, 377520, 0, 6240, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-23', 23, 381480, 0, 3960, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-24', 24, 383880, 0, 2400, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-25', 25, 385560, 0, 1680, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-26', 26, 386760, 0, 1200, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-27', 27, 387600, 0, 840, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-28', 28, 388200, 0, 600, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-29', 29, 388680, 0, 480, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-30', 30, 389040, 0, 360, 0),
  ('22222222-2222-2222-2222-222222222222', '2024-12-31', 31, 372000, 0, 0, 0)
ON CONFLICT (work_project_id, date) DO UPDATE SET
  plan_cumulative = EXCLUDED.plan_cumulative,
  actual_cumulative = EXCLUDED.actual_cumulative,
  plan_daily = EXCLUDED.plan_daily,
  actual_daily = EXCLUDED.actual_daily;

-- Verify inserted data
-- SELECT wp.project_name, wp.fase_name, wp.target, COUNT(wd.id) as total_days
-- FROM work_projects wp
-- LEFT JOIN work_daily_data wd ON wd.work_project_id = wp.id
-- GROUP BY wp.id;
